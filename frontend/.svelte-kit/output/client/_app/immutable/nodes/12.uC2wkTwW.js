import"../chunks/DsnmJJEf.js";import{bf as Yt,g as r,a0 as Zt,ax as $t,G as te,bg as yt,a5 as ee,p as ae,f as U,s as W,e as Q,t as q,a as g,b as re,aV as se,$ as oe,c as T,aO as _,r as P,aX as et,aU as ht,d as gt}from"../chunks/BgF9hfIK.js";import{s as V}from"../chunks/D1J1bf83.js";import{i as K}from"../chunks/BHrthkl3.js";import{e as at,i as ne}from"../chunks/U8OjDNkE.js";import{h as ie}from"../chunks/CWSnUQ51.js";import{a as _t}from"../chunks/DfWigeBc.js";import{r as le,d as xt,s as wt}from"../chunks/pyrgDTSW.js";import{s as X,a as ce}from"../chunks/CNq5NpZJ.js";import{t as de,c as ue,e as ve}from"../chunks/CBjSQ69Q.js";import{p as me}from"../chunks/G8-6NwSg.js";import{i as fe,a as pe,b as be,c as ye}from"../chunks/yiZ6UGiy.js";function he(e){let t=0,i=Zt(0),l;return()=>{Yt()&&(r(i),$t(()=>(t===0&&(l=te(()=>e(()=>yt(i)))),t+=1,()=>{ee(()=>{t-=1,t===0&&(l?.(),l=void 0,yt(i))})})))}}class ge{#t;#e;constructor(t,i){this.#t=t,this.#e=he(i)}get current(){return this.#e(),this.#t()}}const _e=/\(.+\)/,xe=new Set(["all","print","screen","and","or","not","only"]);class we extends ge{constructor(t,i){let l=_e.test(t)||t.split(/[\s,]+/).some(b=>xe.has(b.trim()))?t:`(${t})`;const o=window.matchMedia(l);super(()=>o.matches,b=>de(o,"change",b))}}function ke(e){const t=JSON.parse(e);return t.data&&(t.data=be(t.data,ye.decoders)),t}function it(e){return HTMLElement.prototype.cloneNode.call(e)}function je(e,t=()=>{}){const i=async({action:o,result:b,reset:y=!0,invalidateAll:m=!0})=>{b.type==="success"&&(y&&HTMLFormElement.prototype.reset.call(e),m&&await fe()),(location.origin+location.pathname===o.origin+o.pathname||b.type==="redirect"||b.type==="error")&&await pe(b)};async function l(o){if((o.submitter?.hasAttribute("formmethod")?o.submitter.formMethod:it(e).method)!=="post")return;o.preventDefault();const y=new URL(o.submitter?.hasAttribute("formaction")?o.submitter.formAction:it(e).action),m=o.submitter?.hasAttribute("formenctype")?o.submitter.formEnctype:it(e).enctype,x=new FormData(e),C=o.submitter?.getAttribute("name");C&&x.append(C,o.submitter?.getAttribute("value")??"");const N=new AbortController;let F=!1;const z=await t({action:y,cancel:()=>F=!0,controller:N,formData:x,formElement:e,submitter:o.submitter})??i;if(F)return;let w;try{const k=new Headers({accept:"application/json","x-sveltekit-action":"true"});m!=="multipart/form-data"&&k.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(m)?m:"application/x-www-form-urlencoded");const J=m==="multipart/form-data"?x:new URLSearchParams(x),H=await fetch(y,{method:"POST",headers:k,cache:"no-store",body:J,signal:N.signal});w=ke(await H.text()),w.type==="error"&&(w.status=H.status)}catch(k){if(k?.name==="AbortError")return;w={type:"error",error:k}}await z({action:y,formData:x,formElement:e,update:k=>i({action:y,result:w,reset:k?.reset,invalidateAll:k?.invalidateAll}),result:w})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",l),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",l)}}}var kt="mz3PUW_p",jt=["#FFC700","#FF0000","#2E3191","#41BBC7"],At=3500,Pt=.5,zt=150,St="mix",Et=12,Wt="",Mt=!0,Ut=800,Lt=1600;function Ae(e,t={}){let{colors:i=jt,duration:l=At,force:o=Pt,particleCount:b=zt,particleShape:y=St,particleSize:m=Et,particleClass:x=Wt,destroyAfterDone:C=Mt,stageHeight:N=Ut,stageWidth:F=Lt}=t;(function(c){if(document.querySelector("style[data-neoconfetti]"))return;const v=lt("style");v.dataset.neoconfetti="",v.textContent=c,ct(document.head,v)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),e.classList.add("mz3PUW_c"),e.style.setProperty("--sh",N+"px");let L=[],z=[];const w=()=>Y(M()*(We-1)),k=(c,v)=>y!=="rectangles"&&(c==="circles"||Me(v));function J(c,v){const E=w(),s=k(y,E),a=(f,h)=>c.style.setProperty(f,h+"");a("--xlp",dt(rt(Ft(v,90)-180),0,180,-F/2,F/2)+"px"),a("--dc",l-Y(1e3*M())+"ms");const n=M()<ze?G(M()*Se,2):0;a("--x1",n),a("--x2",-1*n),a("--x3",n),a("--x4",G(rt(dt(rt(Ft(v,90)-180),0,180,-1,1)),4)),a("--y1",G(M()*Tt,4)),a("--y2",G(M()*o*(Ot()?1:-1),4)),a("--y3",Tt),a("--y4",G(Ee(dt(rt(v-180),0,180,o,-o),0),4)),a("--w",(s?m:Y(4*M())+m/2)+"px"),a("--h",(s?m:Y(2*M())+m)+"px");const d=E.toString(2).padStart(3,"0").split("");a("--hr",d.map(f=>+f/2+"").join(" ")),a("--r",d.join(" ")),a("--rd",G(M()*(Pe-Ht)+Ht)+"ms"),a("--br",s?"50%":0)}let H;function Z(){e.innerHTML="",clearTimeout(H),L=Ct(b,i),z=function(c,v=[],E){const s=[];for(const{color:a}of v){const n=lt("div");n.className=`${kt} ${E}`,n.style.setProperty("--bgc",a);const d=lt("div");ct(n,d),ct(c,n),s.push(n)}return s}(e,L,x);for(const[c,v]of Dt(z))J(v,L[+c].degree);H=setTimeout(()=>{C&&(e.innerHTML="")},l)}return Z(),{update(c){const v=c.particleCount??zt,E=c.particleShape??St,s=c.particleSize??Et,a=c.particleClass??Wt,n=c.colors??jt,d=c.stageHeight??Ut,f=c.duration??At,h=c.force??Pt,u=c.stageWidth??Lt,S=c.destroyAfterDone??Mt;L=Ct(v,n);let j=!1;if(v===b){z=Array.from(e.querySelectorAll(`.${kt}`));for(const[O,{color:A}]of Dt(L)){const p=z[+O];JSON.stringify(i)!==JSON.stringify(n)&&p.style.setProperty("--bgc",A),E!==y&&p.style.setProperty("--br",k(E,w())?"50%":"0"),a!==x&&(x&&p.classList.remove(x),a&&p.classList.add(a))}}else j=!0;C&&!S&&clearTimeout(H),e.style.setProperty("--sh",d+"px"),l=f,i=n,o=h,b=v,y=E,m=s,x=a,C=S,N=d,F=u,j&&Z()},destroy(){e.innerHTML="",clearTimeout(H)}}}var Ht=200,Pe=800,ze=.1,Se=.3,Tt=.5,rt=Math.abs,M=Math.random,Y=Math.round,Ee=Math.max,lt=e=>document.createElement(e),ct=(e,t)=>e.appendChild(t),Ct=(e,t)=>Array.from({length:e},(i,l)=>({color:t[l%t.length],degree:360*l/e})),G=(e,t=2)=>Y((e+Number.EPSILON)*10**t)/10**t,dt=(e,t,i,l,o)=>(e-t)*(o-l)/(i-t)+l,Ft=(e,t)=>e+t>360?e+t-360:e+t,Ot=()=>M()>.5,Dt=Object.entries,We=6,Me=e=>e!==1&&Ot();function Nt(e,t,i){e.preventDefault();const l=e.target.getAttribute("data-key");l==="backspace"?(gt(t,r(t).slice(0,-1)),i()?.badGuess&&i(i().badGuess=!1,!0)):r(t).length<5&&gt(t,r(t)+l)}var Ue=U('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l"/>'),Le=U('<div> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"/></div>'),He=U('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div></div>',1),Te=U('<p class="svelte-1pg2j5l"> </p>'),Ce=U('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Fe=U('<button formaction="?/update" name="key"> </button>'),De=U('<div class="row svelte-1pg2j5l"></div>'),Ne=U('<div class="keyboard svelte-1pg2j5l"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Oe=U('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),qe=U('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function ta(e,t){ae(t,!0);let i=me(t,"form",15);const l=new we("(prefers-reduced-motion: reduce)");let o=_(()=>t.data.answers.at(-1)==="xxxxx"),b=_(()=>r(o)?-1:t.data.answers.length),y=_(()=>t.data.guesses[r(b)]||""),m=_(()=>r(y).length===5);const x=_(()=>{let s={},a={};return t.data.answers.forEach((n,d)=>{const f=t.data.guesses[d];for(let h=0;h<5;h+=1){const u=f[h];n[h]==="x"?(s[u]="exact",a[u]="correct"):s[u]||(s[u]=n[h]==="c"?"close":"missing",a[u]=n[h]==="c"?"present":"absent")}}),{classnames:s,description:a}}),C=_(()=>r(x).classnames),N=_(()=>r(x).description);function F(s){s.metaKey||s.key==="Enter"&&!r(m)||document.querySelector(`[data-key="${s.key}" i]`)?.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var L=qe();ve("keydown",se,F),ie(s=>{var a=Ue();oe.title="Sverdle",g(s,a)});var z=W(Q(L),2),w=W(T(z),2);let k;at(w,20,()=>Array.from(Array(6).keys()),s=>s,(s,a)=>{var n=He();const d=_(()=>a===r(b));var f=Q(n),h=T(f);P(f);var u=W(f,2);let S;at(u,20,()=>Array.from(Array(5).keys()),j=>j,(j,O)=>{var A=Le();const p=_(()=>r(d)?r(y):t.data.guesses[a]),I=_(()=>t.data.answers[a]?.[O]),ut=_(()=>r(p)?.[O]??""),qt=_(()=>r(d)&&O===r(p).length),vt=_(()=>r(I)==="x"),mt=_(()=>r(I)==="c"),ft=_(()=>r(I)==="_");let pt;var bt=T(A),st=W(bt),Jt=T(st);{var Rt=D=>{var $=et("(correct)");g(D,$)},Bt=D=>{var $=ht(),Kt=Q($);{var Gt=R=>{var tt=et("(present)");g(R,tt)},It=R=>{var tt=ht(),Qt=Q(tt);{var Vt=B=>{var nt=et("(absent)");g(B,nt)},Xt=B=>{var nt=et("empty");g(B,nt)};K(Qt,B=>{r(ft)?B(Vt):B(Xt,!1)},!0)}g(R,tt)};K(Kt,R=>{r(mt)?R(Gt):R(It,!1)},!0)}g(D,$)};K(Jt,D=>{r(vt)?D(Rt):D(Bt,!1)})}P(st);var ot=W(st,2);le(ot),P(A),q(D=>{pt=X(A,1,"letter svelte-1pg2j5l",null,pt,D),V(bt,`${r(ut)??""} `),ot.disabled=!r(d),xt(ot,r(ut))},[()=>({exact:r(vt),close:r(mt),missing:r(ft),selected:r(qt)})]),g(j,A)}),P(u),q(j=>{V(h,`Row ${a+1}`),S=X(u,1,"row svelte-1pg2j5l",null,S,j)},[()=>({current:r(d)})]),g(s,n)}),P(w);var J=W(w,2),H=T(J);{var Z=s=>{var a=Ce(),n=Q(a);{var d=u=>{var S=Te(),j=T(S);P(S),q(()=>V(j,`the answer was "${t.data.answer??""}"`)),g(u,S)};K(n,u=>{!r(o)&&t.data.answer&&u(d)})}var f=W(n,2),h=T(f);P(f),q(()=>V(h,`${r(o)?"you won :)":"game over :("} play again?`)),g(s,a)},c=s=>{var a=Ne(),n=T(a);let d;var f=W(n,2);f.__click=[Nt,y,i];var h=W(f,2);at(h,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],u=>u,(u,S)=>{var j=De();at(j,21,()=>S,ne,(O,A)=>{var p=Fe();p.__click=[Nt,y,i];var I=T(p,!0);P(p),q(()=>{wt(p,"data-key",r(A)),X(p,1,ce(r(C)[r(A)]),"svelte-1pg2j5l"),p.disabled=r(m),xt(p,r(A)),wt(p,"aria-label",`${r(A)??""} ${(r(N)[r(A)]||"")??""}`),V(I,r(A))}),g(O,p)}),P(j),g(u,j)}),P(a),q(u=>{n.disabled=!r(m),d=X(n,1,"svelte-1pg2j5l",null,d,u)},[()=>({selected:r(m)})]),g(s,a)};K(H,s=>{r(o)||t.data.answers.length>=6?s(Z):s(c,!1)})}P(J),P(z),_t(z,(s,a)=>je?.(s,a),()=>()=>({update:s})=>{s({reset:!1})});var v=W(z,2);{var E=s=>{var a=Oe();_t(a,(n,d)=>Ae?.(n,d),()=>({particleCount:l.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),g(s,a)};K(v,s=>{r(o)&&s(E)})}q(s=>k=X(w,1,"grid svelte-1pg2j5l",null,k,s),[()=>({playing:!r(o),"bad-guess":i()?.badGuess})]),g(e,L),re()}ue(["click"]);export{ta as component};
