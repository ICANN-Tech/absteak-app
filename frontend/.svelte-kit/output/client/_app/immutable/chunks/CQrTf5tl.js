import{hideComponent as u,showComponent as C,createStateVisibility as f}from"./1mjPclRo.js";import{w as m,d}from"./CBjSQ69Q.js";import{D as a,b as p,a as h}from"./gVL5ONnO.js";const l=new Map,s=m(new Map),b=m(new Map);function y(){return{registeredComponents:(e,n)=>{const t={hideDelay:1500,initialVisible:!1,...n},o=f(e.toString(),t);return l.set(e,o),o.isDisplay.subscribe(i=>{b.update(g=>{const c=new Map(g);return c.set(e,i),c}),s.update(g=>{const c=new Map(g);return c.set(e,i),c})}),o},unregisteredComponents:e=>{const n=l.get(e);n&&(n.destroy(),l.delete(e),b.update(t=>{const o=new Map(t);return o.delete(e),o}),s.update(t=>{const o=new Map(t);return o.delete(e),o}))},getComponentVisibility:e=>{let n=!1;return s.subscribe(t=>{n=t.get(e)||!1})(),n},getAllComponentsVisibility:()=>{let e={};return s.subscribe(n=>{n.forEach((t,o)=>{e[o]=t})})(),e},showRegisteredComponents:()=>{l.forEach(e=>{e.show()})},hideRegisteredComponents:()=>{l.forEach(e=>{e.hide()})},callSection:()=>{h(p,s),l.forEach(e=>{e.show()})},exitSection:()=>{h(p,s),l.forEach(e=>{e.show()})},getVisibleComponents:()=>{let e=[];return s.subscribe(n=>{e=[],n.forEach((t,o)=>{t&&e.push(o)})})(),e},isComponentVisible:e=>{let n=!1;return s.subscribe(t=>{n=t.get(e)||!1})(),n},monitorComponent:e=>{const n=p.showOnCall?.includes(e)||!1;return{shouldBeVisible:n,isInVisibleList:n}},showOnlyComponent:e=>{const n=[...a,...Array.from(l.keys())];n.forEach(t=>{if(t===e){a.includes(t)&&C(t);const o=l.get(t);o&&o.show()}else{a.includes(t)&&u(t);const o=l.get(t);o&&o.hide()}}),s.update(t=>{const o=new Map(t);return n.forEach(i=>{o.set(i,i===e)}),o})},hideOnlyComponent:e=>{const n=[...a,...Array.from(l.keys())];n.forEach(t=>{if(t===e){a.includes(t)&&u(t);const o=l.get(t);o&&o.hide()}else{a.includes(t)&&C(t);const o=l.get(t);o&&o.show()}}),s.update(t=>{const o=new Map(t);return n.forEach(i=>{o.set(i,i!==e)}),o})},toggleComponent:e=>{let n=!1;if(s.subscribe(t=>{n=t.get(e)||!1})(),n){a.includes(e)&&u(e);const t=l.get(e);t&&t.hide(),s.update(o=>{const i=new Map(o);return i.set(e,!1),i})}else r.showOnlyComponent(e)},showOnlyComponents:e=>{const n=[...a,...Array.from(l.keys())];n.forEach(t=>{if(e.includes(t)){a.includes(t)&&C(t);const i=l.get(t);i&&i.show()}else{a.includes(t)&&u(t);const i=l.get(t);i&&i.hide()}}),s.update(t=>{const o=new Map(t);return n.forEach(i=>{o.set(i,e.includes(i))}),o})},hideOnlyComponents:e=>{const n=[...a,...Array.from(l.keys())];n.forEach(t=>{if(e.includes(t)){a.includes(t)&&u(t);const i=l.get(t);i&&i.hide()}else{a.includes(t)&&C(t);const i=l.get(t);i&&i.show()}}),s.update(t=>{const o=new Map(t);return n.forEach(i=>{o.set(i,!e.includes(i))}),o})},getComponentTrackingStore:()=>s,getRegisteredComponentTrackingStore:()=>b,isComponentCurrentlyVisible:e=>{let n=!1;return s.subscribe(t=>{n=t.get(e)||!1})(),n},getAllComponentsVisibilityStatus:()=>{let e={};return s.subscribe(n=>{n.forEach((t,o)=>{e[o]=t})})(),e},getComponentVisibilityStore:()=>s,subscribeToComponentVisibility:(e,n)=>{d(s,o=>o.get(e)||!1).subscribe(n)},subscribeToAllComponentsVisibility:e=>{s.subscribe(n=>{const t={};n.forEach((o,i)=>{t[i]=o}),e(t)})},getVisibilityStatistics:()=>{let e={totalComponents:0,visibleComponents:0,hiddenComponents:0,visibilityPercentage:0,visibleComponentIds:[],hiddenComponentIds:[]};return s.subscribe(n=>{e.totalComponents=n.size,e.visibleComponents=0,e.visibleComponentIds=[],e.hiddenComponentIds=[],n.forEach((t,o)=>{t?(e.visibleComponents++,e.visibleComponentIds.push(o)):e.hiddenComponentIds.push(o)}),e.hiddenComponents=e.totalComponents-e.visibleComponents,e.visibilityPercentage=e.totalComponents>0?e.visibleComponents/e.totalComponents*100:0})(),e},updateManualComponentsTracking:(e,n)=>{s.update(t=>{const o=new Map(t);return e.forEach(i=>{o.set(i,n)}),o})}}}const r=y(),V=r.callSection,B=r.exitSection,E=r.registeredComponents,T=r.unregisteredComponents,M=r.getVisibleComponents,O=r.isComponentVisible,v=r.monitorComponent,A=r.showOnlyComponent,R=r.hideOnlyComponent,D=r.toggleComponent,N=r.showOnlyComponents,L=r.hideOnlyComponents,_=r.getComponentTrackingStore,x=r.getRegisteredComponentTrackingStore,F=r.isComponentCurrentlyVisible,P=r.getAllComponentsVisibilityStatus,U=r.getComponentVisibilityStore,H=r.subscribeToComponentVisibility,z=r.subscribeToAllComponentsVisibility,G=r.getVisibilityStatistics,j=r.updateManualComponentsTracking;function q(){return l}export{r as bookingMonitor,y as createBookingMonitor,P as getAllBookingComponentsVisibilityStatus,_ as getBookingComponentTrackingStore,U as getBookingComponentVisibilityStore,G as getBookingVisibilityStatistics,x as getRegisteredBookingComponentTrackingStore,q as getRegisteredBookingComponents,M as getVisibleBookingComponents,B as hideBookingComponents,R as hideOnlyBookingComponent,L as hideOnlyBookingComponents,F as isBookingComponentCurrentlyVisible,O as isBookingComponentVisible,v as monitorBookingComponent,E as registerBookingComponent,V as showBookingComponents,A as showOnlyBookingComponent,N as showOnlyBookingComponents,z as subscribeToAllBookingComponentsVisibility,H as subscribeToBookingComponentVisibility,D as toggleBookingComponent,T as unregisterBookingComponent,j as updateBookingManualComponentsTracking};
