import{hideComponent as a,showComponent as c,createStateVisibility as m}from"./1mjPclRo.js";import{w as g,d as f}from"./CBjSQ69Q.js";import{D as l,b as u,h as d,a as y}from"./gVL5ONnO.js";const r=new Map,o=g(new Map),b=g(new Map);function E(){return{registeredComponents:(e,n)=>{const i={hideDelay:1500,initialVisible:!1,...n},t=m(e.toString(),i);return r.set(e,t),t.isDisplay.subscribe(s=>{b.update(C=>{const p=new Map(C);return p.set(e,s),p}),o.update(C=>{const p=new Map(C);return p.set(e,s),p})}),t},unregisteredComponents:e=>{const n=r.get(e);n&&(n.destroy(),r.delete(e),b.update(i=>{const t=new Map(i);return t.delete(e),t}),o.update(i=>{const t=new Map(i);return t.delete(e),t}))},getComponentVisibility:e=>{let n=!1;return o.subscribe(i=>{n=i.get(e)||!1})(),n},getAllComponentsVisibility:()=>{let e={};return o.subscribe(n=>{n.forEach((i,t)=>{e[t]=i})})(),e},showRegisteredComponents:()=>{r.forEach(e=>{e.show()})},hideRegisteredComponents:()=>{r.forEach(e=>{e.hide()})},callSection:()=>{y(u,o),r.forEach(e=>{e.show()})},exitSection:()=>{d(u,o),r.forEach(e=>{e.show()})},getVisibleComponents:()=>{let e=[];return o.subscribe(n=>{e=[],n.forEach((i,t)=>{i&&e.push(t)})})(),e},isComponentVisible:e=>{let n=!1;return o.subscribe(i=>{n=i.get(e)||!1})(),n},monitorComponent:function(e){let n=!1;return o.subscribe(t=>{n=t.get(e)||!1})(),{shouldBeVisible:u.showOnCall?.includes(e)||!1,isInVisibleList:n}},showOnlyComponent:e=>{const n=[...l,...Array.from(r.keys())];n.forEach(i=>{if(i===e){l.includes(i)&&c(i);const t=r.get(i);t&&t.show()}else{l.includes(i)&&a(i);const t=r.get(i);t&&t.hide()}}),o.update(i=>{const t=new Map(i);return n.forEach(s=>{t.set(s,s===e)}),t})},hideOnlyComponent:e=>{const n=[...l,...Array.from(r.keys())];n.forEach(i=>{if(i===e){l.includes(i)&&a(i);const t=r.get(i);t&&t.hide()}else{l.includes(i)&&c(i);const t=r.get(i);t&&t.show()}}),o.update(i=>{const t=new Map(i);return n.forEach(s=>{t.set(s,s!==e)}),t})},toggleComponent:e=>{let n=!1;if(o.subscribe(i=>{n=i.get(e)||!1})(),n){l.includes(e)&&a(e);const i=r.get(e);i&&i.hide(),o.update(t=>{const s=new Map(t);return s.set(e,!1),s})}else h.showOnlyComponent(e)},showOnlyComponents:e=>{const n=[...l,...Array.from(r.keys())];n.forEach(i=>{if(e.includes(i)){l.includes(i)&&c(i);const s=r.get(i);s&&s.show()}else{l.includes(i)&&a(i);const s=r.get(i);s&&s.hide()}}),o.update(i=>{const t=new Map(i);return n.forEach(s=>{t.set(s,e.includes(s))}),t})},hideOnlyComponents:e=>{const n=[...l,...Array.from(r.keys())];n.forEach(i=>{if(e.includes(i)){l.includes(i)&&a(i);const s=r.get(i);s&&s.hide()}else{l.includes(i)&&c(i);const s=r.get(i);s&&s.show()}}),o.update(i=>{const t=new Map(i);return n.forEach(s=>{t.set(s,!e.includes(s))}),t})},getComponentTrackingStore:()=>o,getRegisteredComponentTrackingStore:()=>b,isComponentCurrentlyVisible:e=>{let n=!1;return o.subscribe(i=>{n=i.get(e)||!1})(),n},getAllComponentsVisibilityStatus:()=>{let e={};return o.subscribe(n=>{n.forEach((i,t)=>{e[t]=i})})(),e},getComponentVisibilityStore:()=>o,subscribeToComponentVisibility:(e,n)=>{f(o,t=>t.get(e)||!1).subscribe(n)},subscribeToAllComponentsVisibility:e=>{o.subscribe(n=>{const i={};n.forEach((t,s)=>{i[s]=t}),e(i)})},getVisibilityStatistics:()=>{let e={totalComponents:0,visibleComponents:0,hiddenComponents:0,visibilityPercentage:0,visibleComponentIds:[],hiddenComponentIds:[]};return o.subscribe(n=>{e.totalComponents=n.size,e.visibleComponents=0,e.visibleComponentIds=[],e.hiddenComponentIds=[],n.forEach((i,t)=>{i?(e.visibleComponents++,e.visibleComponentIds.push(t)):e.hiddenComponentIds.push(t)}),e.hiddenComponents=e.totalComponents-e.visibleComponents,e.visibilityPercentage=e.totalComponents>0?e.visibleComponents/e.totalComponents*100:0})(),e},updateManualComponentsTracking:(e,n)=>{o.update(i=>{const t=new Map(i);return e.forEach(s=>{t.set(s,n)}),t})}}}const h=E();function x(){return new Map(r)}const{registeredComponents:M,unregisteredComponents:T,getComponentVisibility:O,getAllComponentsVisibility:A,showRegisteredComponents:k,hideRegisteredComponents:v,callSection:R,exitSection:D,getVisibleComponents:N,isComponentVisible:L,monitorComponent:_,showOnlyComponent:F,hideOnlyComponent:P,toggleComponent:U,showOnlyComponents:B,hideOnlyComponents:H,getComponentTrackingStore:z,getRegisteredComponentTrackingStore:G,isComponentCurrentlyVisible:j,getAllComponentsVisibilityStatus:q,getComponentVisibilityStore:J,subscribeToComponentVisibility:K,subscribeToAllComponentsVisibility:Q,getVisibilityStatistics:W,updateManualComponentsTracking:X}=h;export{E as createExperienceMonitor,h as experienceMonitor,A as getAllExperienceComponentsVisibility,q as getAllExperienceComponentsVisibilityStatus,z as getExperienceComponentTrackingStore,O as getExperienceComponentVisibility,J as getExperienceComponentVisibilityStore,W as getExperienceVisibilityStatistics,G as getRegisteredExperienceComponentTrackingStore,x as getRegisteredExperienceComponents,N as getVisibleExperienceComponents,D as hideExperienceComponents,P as hideOnlyExperienceComponent,H as hideOnlyExperienceComponents,v as hideRegisteredExperienceComponents,j as isExperienceComponentCurrentlyVisible,L as isExperienceComponentVisible,_ as monitorExperienceComponent,M as registerExperienceComponent,R as showExperienceComponents,F as showOnlyExperienceComponent,B as showOnlyExperienceComponents,k as showRegisteredExperienceComponents,Q as subscribeToAllExperienceComponentsVisibility,K as subscribeToExperienceComponentVisibility,U as toggleExperienceComponent,T as unregisterExperienceComponent,X as updateExperienceManualComponentsTracking};
