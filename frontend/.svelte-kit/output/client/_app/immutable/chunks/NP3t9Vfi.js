const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ChHyC5ku.js","./D9Z9MdNV.js","./CBjSQ69Q.js","./BgF9hfIK.js","./1mjPclRo.js","./Beh5Gq9i.js","./CZBgViXL.js"])))=>i.map(i=>d[i]);
import{d as r,w as S,g}from"./CBjSQ69Q.js";import{_ as T}from"./D9Z9MdNV.js";import{viewportVisibilityStore as M,unlockVisibility as x,lockVisibility as N,hideComponent as U,showComponent as P}from"./1mjPclRo.js";var o=(e=>(e.Navigation="navigation",e.Schedule="schedule",e.Highlight="highlight",e.LanguageSwitch="language-switch",e.VideoPromotion="video-promotion",e.ScrollIndicator="scroll-indicator",e.BackToTop="back-to-top",e.ChatBot="chat-bot",e.Operation="operation",e))(o||{}),l=(e=>(e.Hero="hero",e.VideoHighlight="video-highlight",e.Experience="experience",e.Chef="chef",e.Menu="menu",e.Booking="booking",e.Footer="footer",e))(l||{}),m=(e=>(e.VideoHighlight="video-highlight",e.Experience="experience",e.Chef="chef",e.Menu="menu",e.Booking="booking",e))(m||{});const Q=[{id:l.Hero,name:"Hero",component:null},{id:l.VideoHighlight,name:"About",component:null},{id:l.Experience,name:"Story",component:null},{id:l.Chef,name:"Chef",component:null},{id:l.Menu,name:"Menu",component:null},{id:l.Booking,name:"Reserve",component:null},{id:l.Footer,name:"Footer",component:null}],b={sm:640,md:768,lg:1024,xl:1280,"2xl":1536},H={dimensions:{width:0,height:0,innerWidth:0,innerHeight:0},scroll:{x:0,y:0,direction:"none",isScrolling:!1,isDisabled:!1,velocity:0,lastScrollTime:0},mouse:{x:0,y:0,isTracking:!1,lastMoveTime:0,isOverComponent:!1,hoveredComponent:null},section:{currentSection:l.Hero,previousSection:null,targetSection:null,isNavigating:!1,navigationProgress:0,sectionElements:new Map},responsive:{isMobile:!1,isTablet:!1,isDesktop:!0,breakpoint:"lg",orientation:"landscape"},isInitialized:!1,lastUpdate:Date.now()},s=S(H),h=s;r(s,e=>e.scroll);r(s,e=>e.section);r(s,e=>e.mouse);r(s,e=>e.responsive);r(s,e=>e.dimensions);r(s,e=>e.section.currentSection);r(s,e=>e.scroll.isScrolling);r(s,e=>e.responsive.isMobile);r(s,e=>e.section.isNavigating);r(s,e=>e.scroll.isDisabled);function j(e,t){let i="xs";return e>=b["2xl"]?i="2xl":e>=b.xl?i="xl":e>=b.lg?i="lg":e>=b.md?i="md":e>=b.sm&&(i="sm"),{isMobile:e<b.md,isTablet:e>=b.md&&e<b.lg,isDesktop:e>=b.lg,breakpoint:i,orientation:e>t?"landscape":"portrait"}}function A(e,t,i){return i===0?0:Math.abs(e-t)/i}const D={setScrollPosition:(e,t)=>{s.update(i=>{const n=Date.now(),a=n-i.scroll.lastScrollTime,c=A(t,i.scroll.y,a);let k="none";return t>i.scroll.y?k="down":t<i.scroll.y&&(k="up"),{...i,scroll:{...i.scroll,x:e,y:t,direction:k,velocity:c,lastScrollTime:n},lastUpdate:n}})},updateScrollDirection:e=>{s.update(t=>({...t,scroll:{...t.scroll,direction:e},lastUpdate:Date.now()}))},setScrolling:e=>{s.update(t=>({...t,scroll:{...t.scroll,isScrolling:e},lastUpdate:Date.now()}))},disableScroll:()=>{s.update(e=>({...e,scroll:{...e.scroll,isDisabled:!0},lastUpdate:Date.now()})),typeof document<"u"&&(document.body.style.overflow="hidden")},enableScroll:()=>{s.update(e=>({...e,scroll:{...e.scroll,isDisabled:!1},lastUpdate:Date.now()})),typeof document<"u"&&(document.body.style.overflow="")},navigateToSection:e=>{s.update(t=>({...t,section:{...t.section,targetSection:e,isNavigating:!0,navigationProgress:0},lastUpdate:Date.now()}))},setCurrentSection:e=>{s.update(t=>({...t,section:{...t.section,previousSection:t.section.currentSection,currentSection:e,targetSection:null,isNavigating:!1,navigationProgress:1},lastUpdate:Date.now()}))},registerSectionElement:(e,t)=>{s.update(i=>{const n=new Map(i.section.sectionElements);return n.set(e,t),{...i,section:{...i.section,sectionElements:n},lastUpdate:Date.now()}})},unregisterSectionElement:e=>{s.update(t=>{const i=new Map(t.section.sectionElements);return i.delete(e),{...t,section:{...t.section,sectionElements:i},lastUpdate:Date.now()}})},updateMousePosition:(e,t)=>{s.update(i=>({...i,mouse:{...i.mouse,x:e,y:t,lastMoveTime:Date.now()},lastUpdate:Date.now()}))},setMouseTracking:e=>{s.update(t=>({...t,mouse:{...t.mouse,isTracking:e},lastUpdate:Date.now()}))},setHoveredComponent:e=>{s.update(t=>({...t,mouse:{...t.mouse,hoveredComponent:e,isOverComponent:e!==null},lastUpdate:Date.now()}))},updateDimensions:e=>{s.update(t=>{const i={...t.dimensions,...e},n=j(i.width,i.height);return{...t,dimensions:i,responsive:n,lastUpdate:Date.now()}})},updateResponsiveState:e=>{s.update(t=>({...t,responsive:{...t.responsive,...e},lastUpdate:Date.now()}))},initialize:()=>{s.update(e=>({...e,isInitialized:!0,lastUpdate:Date.now()})),console.log("🖥️ Viewport state management initialized")},reset:()=>{s.set({...H,lastUpdate:Date.now()}),console.log("🔄 Viewport state reset")}},B=()=>g(s),p={disableScroll:D.disableScroll,enableScroll:D.enableScroll,setSections:e=>{console.log("🔄 setSections called (legacy compatibility mode)")},setCurrentSection:e=>{const t=Object.values(l);e>=0&&e<t.length&&D.setCurrentSection(t[e])},setScrollDelay:e=>{console.log("🔄 setScrollDelay called (legacy compatibility mode)")},toggleScroll:()=>{console.log("🔄 toggleScroll called (legacy compatibility mode)")},updateLastScrollTime:()=>{console.log("🔄 updateLastScrollTime called (legacy compatibility mode)")},setTransitioning:e=>{console.log("🔄 setTransitioning called (legacy compatibility mode)")},get canScroll(){return!g(s).scroll.isDisabled},subscribe:h.subscribe,get:B,actions:D},X=r(s,e=>!e.scroll.isDisabled),ee=r(s,e=>e.section.isNavigating),te=r(s,e=>Object.values(l).indexOf(e.section.currentSection)),E=S(!1),C=S(!1),_=S(!1),v=S(!1),w=S(null),ie=E,ne=v,oe=w;r([E,C,_],([e,t,i])=>e&&t&&i);r([E,C,_,v,w],([e,t,i,n,a])=>({sectionsInitialized:e,componentsInitialized:t,highlightsInitialized:i,isLoading:n,error:a}));const se={setSectionsInitialized:e=>{E.set(e),console.log(`📦 Sections initialized: ${e}`)},setComponentsInitialized:e=>{C.set(e),console.log(`🔧 Components initialized: ${e}`)},setHighlightsInitialized:e=>{_.set(e),console.log(`✨ Highlights initialized: ${e}`)},setLoading:e=>{v.set(e),e&&w.set(null),console.log(`⏳ Loading: ${e}`)},setError:e=>{w.set(e),e?(v.set(!1),console.error(`❌ Initialization error: ${e}`)):console.log("✅ Error cleared")},reset:()=>{E.set(!1),C.set(!1),_.set(!1),v.set(!1),w.set(null),console.log("🔄 Initialization state reset")}},le=()=>{},u=S(0),I=S(!1),d=S([]),R=async()=>{try{const{highlights:e}=await T(async()=>{const{highlights:t}=await import("./Bxq_iBBz.js");return{highlights:t}},[],import.meta.url);d.set(e)}catch(e){console.error("Failed to load highlights:",e),d.set([{id:m.VideoHighlight,name:"Video Highlight",sectionId:l.VideoHighlight},{id:m.Experience,name:"Experience",sectionId:l.Experience},{id:m.Chef,name:"Chef",sectionId:l.Chef},{id:m.Menu,name:"Menu",sectionId:l.Menu},{id:m.Booking,name:"Reservation",sectionId:l.Booking}])}};r([u,d],([e,t])=>t&&t.length>0&&e>=0&&e<t.length?t[e]:null);const f={jumpToHighlight:e=>{d.subscribe(t=>{if(e>=0&&e<t.length){I.set(!0),u.set(e);const i=t[e];i&&i.sectionId&&(T(async()=>{const{useViewportNavigator:n}=await import("./ChHyC5ku.js");return{useViewportNavigator:n}},__vite__mapDeps([0,1,2,3]),import.meta.url).then(({useViewportNavigator:n})=>{n().jumpToSectionById(i.sectionId)}),T(async()=>{const{resetComponentVisibility:n,isVisibilityLocked:a}=await import("./1mjPclRo.js");return{resetComponentVisibility:n,isVisibilityLocked:a}},__vite__mapDeps([4,2,3]),import.meta.url).then(({resetComponentVisibility:n,isVisibilityLocked:a})=>{T(async()=>{const{ComponentId:c}=await import("./Beh5Gq9i.js");return{ComponentId:c}},__vite__mapDeps([5,6]),import.meta.url).then(({ComponentId:c})=>{a(c.Highlight)||n(c.Highlight)})})),setTimeout(()=>{I.set(!1)},300)}})()},jumpToHighlightById:e=>{d.subscribe(t=>{const i=t.findIndex(n=>n.id===e);i!==-1&&f.jumpToHighlight(i)})()},jumpToHighlightBySectionId:e=>{d.subscribe(t=>{const i=t.findIndex(n=>n.sectionId===e);i!==-1&&f.jumpToHighlight(i)})()},nextHighlight:()=>{u.subscribe(e=>{d.subscribe(t=>{const i=(e+1)%t.length;f.jumpToHighlight(i)})()})()},previousHighlight:()=>{u.subscribe(e=>{d.subscribe(t=>{const i=e===0?t.length-1:e-1;f.jumpToHighlight(i)})()})()},reset:()=>{u.set(0),I.set(!1)},updateHighlights:e=>{d.set(e),u.subscribe(t=>{t>=e.length&&u.set(0)})()},syncWithSectionChange:e=>{d.subscribe(t=>{const i=t.findIndex(n=>n.sectionId===e);i!==-1&&u.subscribe(n=>{i!==n&&u.set(i)})()})()},syncWithSectionIndex:e=>{d.subscribe(t=>{e>=0&&e<t.length&&u.set(e)})()}},ae=Object.freeze(Object.defineProperty({__proto__:null,currentHighlightIndex:u,highlightStore:f,highlightsData:d,initializeHighlights:R,isHighlightTransitioning:I},Symbol.toStringTag,{value:"Module"})),F={enabled:!0,delay:800,smoothBehavior:!0,preventNativeScroll:!0};class Y{config;onScrollCallback;wheelEventListener;keyEventListener;touchStartY=0;touchEventListener;scrollDelay=800;lastScrollTime=0;constructor(t={}){this.config={...F,...t},this.scrollDelay=this.config.delay,this.initializeScrollState()}initializeScrollState(){this.config.enabled?p.actions.enableScroll():p.actions.disableScroll()}enableScroll(){this.config.enabled=!0,p.actions.enableScroll()}disableScroll(){this.config.enabled=!1,p.actions.disableScroll()}toggleScroll(){this.config.enabled=!this.config.enabled,g(h).scroll.isDisabled?p.actions.enableScroll():p.actions.disableScroll()}isScrollEnabled(){return!g(h).scroll.isDisabled}setScrollDelay(t){this.config.delay=t,this.scrollDelay=t}getScrollDelay(){return this.scrollDelay}canScroll(){const t=g(h),n=Date.now()-this.lastScrollTime;return!t.scroll.isDisabled&&!t.section.isNavigating&&n>=this.scrollDelay}updateLastScrollTime(){this.lastScrollTime=Date.now()}getScrollState(){const t=g(h);return{enabled:!t.scroll.isDisabled,delay:this.scrollDelay,lastScrollTime:this.lastScrollTime,isTransitioning:t.section.isNavigating,canScroll:this.canScroll()}}updateConfig(t){this.config={...this.config,...t},t.enabled!==void 0&&(t.enabled?this.enableScroll():this.disableScroll()),t.delay!==void 0&&this.setScrollDelay(t.delay)}onScroll(t){this.onScrollCallback=t}getSectionIndex(t){return Object.values(l).indexOf(t)}getSectionId(t){return Object.values(l)[t]||null}handleScrollEvent(t){if(!this.canScroll())return;const i=g(h),n=this.getSectionIndex(i.section.currentSection),a=Object.values(l).length;let c=n;t==="down"&&n<a-1?c=n+1:t==="up"&&n>0&&(c=n-1),c!==n&&(this.updateLastScrollTime(),this.onScrollCallback?.(t,n,c))}startScrollListener(){this.stopScrollListener(),this.wheelEventListener=t=>{this.config.preventNativeScroll&&t.preventDefault();const i=t.deltaY>0?"down":"up";this.handleScrollEvent(i)},this.keyEventListener=t=>{if(!this.canScroll())return;let i=null;switch(t.key){case"ArrowDown":case"PageDown":case" ":i="down";break;case"ArrowUp":case"PageUp":i="up";break}i&&(t.preventDefault(),this.handleScrollEvent(i))},this.touchEventListener={start:t=>{this.touchStartY=t.touches[0].clientY},end:t=>{if(!this.canScroll())return;const i=t.changedTouches[0].clientY,n=this.touchStartY-i;if(Math.abs(n)>50){const c=n>0?"down":"up";this.handleScrollEvent(c)}}},typeof window<"u"&&(window.addEventListener("wheel",this.wheelEventListener,{passive:!1}),window.addEventListener("keydown",this.keyEventListener),window.addEventListener("touchstart",this.touchEventListener.start,{passive:!0}),window.addEventListener("touchend",this.touchEventListener.end,{passive:!0}))}stopScrollListener(){typeof window<"u"&&(this.wheelEventListener&&window.removeEventListener("wheel",this.wheelEventListener),this.keyEventListener&&window.removeEventListener("keydown",this.keyEventListener),this.touchEventListener&&(window.removeEventListener("touchstart",this.touchEventListener.start),window.removeEventListener("touchend",this.touchEventListener.end))),this.wheelEventListener=void 0,this.keyEventListener=void 0,this.touchEventListener=void 0}destroy(){this.stopScrollListener(),this.onScrollCallback=void 0}}function W(e){return new Y(e)}const re={enable:()=>p.actions.enableScroll(),disable:()=>p.actions.disableScroll(),toggle:()=>{g(h).scroll.isDisabled?p.actions.enableScroll():p.actions.disableScroll()},isEnabled:()=>!g(h).scroll.isDisabled,isTransitioning:()=>g(h).section.isNavigating,canScroll:()=>{const e=g(h);return!e.scroll.isDisabled&&!e.section.isNavigating},getState:()=>{const e=g(h);return{enabled:!e.scroll.isDisabled,delay:800,lastScrollTime:e.scroll.lastScrollTime,isTransitioning:e.section.isNavigating,canScroll:!e.scroll.isDisabled&&!e.section.isNavigating}}};function ce(e){const t=W(e);return{manager:t,enable:t.enableScroll.bind(t),disable:t.disableScroll.bind(t),toggle:t.toggleScroll.bind(t),isEnabled:t.isScrollEnabled.bind(t),canScroll:t.canScroll.bind(t),setDelay:t.setScrollDelay.bind(t),getDelay:t.getScrollDelay.bind(t),getState:t.getScrollState.bind(t),onScroll:t.onScroll.bind(t),startListener:t.startScrollListener.bind(t),stopListener:t.stopScrollListener.bind(t),updateConfig:t.updateConfig.bind(t),destroy:t.destroy.bind(t)}}const z=new Map,V=S(new Map),O=[o.Navigation,o.LanguageSwitch,o.Schedule,o.Highlight,o.VideoPromotion,o.ChatBot,o.Operation,o.ScrollIndicator],y={initiallyVisible:[o.LanguageSwitch],initiallyHidden:[o.Navigation,o.Schedule,o.Highlight,o.VideoPromotion,o.ChatBot,o.Operation,o.ScrollIndicator],defaultSection:l.Hero},G=S({isInitialized:!1,initializedAt:null,config:y});async function de(e=y){try{await new Promise(i=>setTimeout(i,500)),M.activeComponents.subscribe(i=>{console.log("🔍 Currently registered components:",i)})(),console.log("🔓 Unlocking all components for initialization..."),x(),K(),e.initiallyVisible.length>0&&Z(e.initiallyVisible),e.initiallyVisible.includes(o.LanguageSwitch)&&(console.log("🔒 Locking LanguageSwitch to visible..."),N(o.LanguageSwitch,!0)),G.set({isInitialized:!0,initializedAt:new Date,config:e}),console.log("✅ Component initialization completed successfully"),console.log(`📍 Default section: ${e.defaultSection}`)}catch(t){throw console.error("❌ Error during component initialization:",t),t}}function L(e){Object.values(o);const t=e.visible||y.initiallyVisible,i=e.hidden||y.initiallyHidden,n=t.filter(a=>i.includes(a));return n.length>0&&console.warn("⚠️ Components cannot be both visible and hidden:",n),{initiallyVisible:t,initiallyHidden:i,defaultSection:e.defaultSection||y.defaultSection}}L({visible:[o.Navigation,o.LanguageSwitch],hidden:[o.Schedule,o.Highlight,o.VideoPromotion,o.ChatBot,o.Operation,o.ScrollIndicator]}),L({visible:Object.values(o),hidden:[]}),L({visible:[o.Navigation,o.LanguageSwitch,o.ScrollIndicator],hidden:[o.Schedule,o.Highlight,o.VideoPromotion,o.ChatBot,o.Operation]}),L({visible:Object.values(o),hidden:[],defaultSection:l.Hero});function K(){console.log("🙈 Hiding all components (manual + registered)..."),O.forEach(e=>{console.log("hide all component",e),U(e),V.update(t=>{const i=new Map(t);return i.set(e,!1),i})}),z.forEach(e=>{e.hide()})}function Z(e){console.log("👁️ Showing specific components:",e),e.forEach(t=>{O.includes(t)&&P(t);const i=z.get(t);i&&i.show(),V.update(n=>{const a=new Map(n);return a.set(t,!0),a})})}export{o as C,m as H,l as S,p as a,se as b,te as c,R as d,de as e,Q as f,ie as g,f as h,ee as i,oe as j,ne as k,le as l,re as m,d as n,u as o,ae as p,X as s,ce as u,h as v};
