import{w as b}from"./CBjSQ69Q.js";import{hideComponent as C,showComponent as u,createStateVisibility as f}from"./1mjPclRo.js";import{D as a,b as c,h as m,a as d}from"./gVL5ONnO.js";const l=new Map,r=b(new Map),p=b(new Map);function y(){return{registeredComponents:(e,i)=>{const t={hideDelay:2e3,initialVisible:!1,...i},s=f(e.toString(),t);return l.set(e,s),s.isDisplay.subscribe(n=>{p.update(g=>{const h=new Map(g);return h.set(e,n),h}),r.update(g=>{const h=new Map(g);return h.set(e,n),h})}),s},unregisteredComponents:e=>{const i=l.get(e);i&&(i.destroy(),l.delete(e),p.update(t=>{const s=new Map(t);return s.delete(e),s}),r.update(t=>{const s=new Map(t);return s.delete(e),s}))},getComponentVisibility:e=>{let i=!1;return r.subscribe(t=>{i=t.get(e)||!1})(),i},getAllComponentsVisibility:()=>{let e={};return r.subscribe(i=>{i.forEach((t,s)=>{e[s]=t})})(),e},showRegisteredComponents:()=>{l.forEach(e=>{e.show()})},hideRegisteredComponents:()=>{l.forEach(e=>{e.hide()})},callSection:()=>{d(c,r),l.forEach(e=>{e.show()})},exitSection:()=>{m(c,r),l.forEach(e=>{e.show()})},getVisibleComponents:()=>{let e=[];return r.subscribe(i=>{e=[],i.forEach((t,s)=>{t&&e.push(s)})})(),e},isComponentVisible:e=>{let i=!1;return r.subscribe(t=>{i=t.get(e)||!1})(),i},monitorComponent(e){const i=this.isComponentVisible(e),t=c.showOnCall?.includes(e)||!1;return{shouldBeVisible:i,isInVisibleList:t}},showOnlyComponent:e=>{const i=[...a,...Array.from(l.keys())];i.forEach(t=>{if(t===e){a.includes(t)&&u(t);const n=l.get(t);n&&n.show()}else{a.includes(t)&&C(t);const n=l.get(t);n&&n.hide()}}),r.update(t=>{const s=new Map(t);return i.forEach(n=>{s.set(n,n===e)}),s})},hideOnlyComponent:e=>{const i=[...a,...Array.from(l.keys())];i.forEach(t=>{if(t===e){a.includes(t)&&C(t);const n=l.get(t);n&&n.hide()}else{a.includes(t)&&u(t);const n=l.get(t);n&&n.show()}}),r.update(t=>{const s=new Map(t);return i.forEach(n=>{s.set(n,n!==e)}),s})},toggleComponent(e){this.isComponentVisible(e)?this.hideOnlyComponent(e):this.showOnlyComponent(e)},showOnlyComponents:e=>{const i=[...a,...Array.from(l.keys())];i.forEach(t=>{if(e.includes(t)){a.includes(t)&&u(t);const n=l.get(t);n&&n.show()}else{a.includes(t)&&C(t);const n=l.get(t);n&&n.hide()}}),r.update(t=>{const s=new Map(t);return i.forEach(n=>{s.set(n,e.includes(n))}),s})},hideOnlyComponents:e=>{const i=[...a,...Array.from(l.keys())];i.forEach(t=>{if(e.includes(t)){a.includes(t)&&C(t);const n=l.get(t);n&&n.hide()}else{a.includes(t)&&u(t);const n=l.get(t);n&&n.show()}}),r.update(t=>{const s=new Map(t);return i.forEach(n=>{s.set(n,!e.includes(n))}),s})},getComponentTrackingStore:()=>r,getRegisteredComponentTrackingStore:()=>p,isComponentCurrentlyVisible:e=>{let i=!1;return r.subscribe(t=>{i=t.get(e)||!1})(),i},getAllComponentsVisibilityStatus:()=>{let e={};return r.subscribe(i=>{i.forEach((t,s)=>{e[s]=t})})(),e},getComponentVisibilityStore:()=>r,subscribeToComponentVisibility:(e,i)=>{r.subscribe(t=>{const s=t.get(e)||!1;i(s)})},subscribeToAllComponentsVisibility:e=>{r.subscribe(i=>{const t={};i.forEach((s,n)=>{t[n]=s}),e(t)})},getVisibilityStatistics:()=>{let e={totalComponents:0,visibleComponents:0,hiddenComponents:0,visibilityPercentage:0,visibleComponentIds:[],hiddenComponentIds:[]};return r.subscribe(i=>{e.totalComponents=i.size,e.visibleComponents=0,e.visibleComponentIds=[],e.hiddenComponentIds=[],i.forEach((t,s)=>{t?(e.visibleComponents++,e.visibleComponentIds.push(s)):e.hiddenComponentIds.push(s)}),e.hiddenComponents=e.totalComponents-e.visibleComponents,e.visibilityPercentage=e.totalComponents>0?e.visibleComponents/e.totalComponents*100:0})(),e},updateManualComponentsTracking:(e,i)=>{r.update(t=>{const s=new Map(t);return e.forEach(n=>{s.set(n,i)}),s})}}}const o=y();function E(e,i={}){return o.registeredComponents(e,i)}function M(e){return o.unregisteredComponents(e)}function T(){return new Map(l)}function O(e=[]){e.length===0?o.callSection():e.forEach(i=>o.showOnlyComponent(i))}function H(e=[]){e.length===0?o.exitSection():e.forEach(i=>o.hideOnlyComponent(i))}function k(){return o.getVisibleComponents()}function A(e){return o.isComponentVisible(e)}function v(e,i){return o.registeredComponents(e,i)}const R=()=>o.getAllComponentsVisibilityStatus(),D=()=>o.getComponentTrackingStore(),N=()=>o.getRegisteredComponentTrackingStore(),x=e=>o.isComponentCurrentlyVisible(e),L=()=>o.getComponentVisibilityStore(),_=(e,i)=>o.subscribeToComponentVisibility(e,i),F=e=>o.subscribeToAllComponentsVisibility(e),P=()=>o.getVisibilityStatistics(),U=(e,i)=>o.updateManualComponentsTracking(e,i),z=e=>o.showOnlyComponent(e),B=e=>o.hideOnlyComponent(e),G=e=>o.toggleComponent(e),j=e=>o.showOnlyComponents(e);export{y as createVideoHighlightMonitor,R as getAllComponentsVisibilityStatus,D as getComponentTrackingStore,L as getComponentVisibilityStore,N as getRegisteredComponentTrackingStore,T as getRegisteredVideoHighlightComponentsMap,k as getVideoHighlightVisibleComponents,P as getVisibilityStatistics,B as hideOnlyVideoHighlightComponent,H as hideVideoHighlightComponents,x as isComponentCurrentlyVisible,A as isComponentVisibleInVideoHighlight,v as monitorVideoHighlightComponent,E as registerVideoHighlightComponent,z as showOnlyVideoHighlightComponent,j as showOnlyVideoHighlightComponents,O as showVideoHighlightComponents,F as subscribeToAllComponentsVisibility,_ as subscribeToComponentVisibility,G as toggleVideoHighlightComponent,M as unregisterVideoHighlightComponent,U as updateManualComponentsTracking,o as videoHighlightMonitor};
