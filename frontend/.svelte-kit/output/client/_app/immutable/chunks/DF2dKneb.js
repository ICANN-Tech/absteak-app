import{C as s}from"./NP3t9Vfi.js";import{hideComponent as C,showComponent as g,createStateVisibility as d}from"./1mjPclRo.js";import{d as b,w as m}from"./CBjSQ69Q.js";import{h as S,a as w}from"./gVL5ONnO.js";const l=new Map,r=m(new Map),h=m(new Map),u=[s.Navigation,s.LanguageSwitch,s.ScrollIndicator,s.Highlight,s.Schedule],f={hideOnCall:[s.Navigation,s.Schedule,s.Highlight,s.VideoPromotion,s.ChatBot,s.Operation,s.BackToTop],showOnCall:[s.LanguageSwitch,s.ScrollIndicator],showOnExit:[s.Navigation,s.Schedule,s.Highlight,s.LanguageSwitch,s.VideoPromotion,s.ChatBot,s.Operation,s.ScrollIndicator],hideOnExit:[s.ScrollIndicator],manualComponents:[s.Navigation,s.LanguageSwitch,s.ScrollIndicator,s.Schedule,s.Highlight,s.VideoPromotion,s.ChatBot,s.Operation]};function y(){return{registeredComponents:(e,i)=>{const t={hideDelay:2e3,initialVisible:!1,...i},n=d(e.toString(),t);return l.set(e,n),n.isDisplay.subscribe(o=>{h.update(p=>{const c=new Map(p);return c.set(e,o),c}),r.update(p=>{const c=new Map(p);return c.set(e,o),c})}),n},unregisteredComponents:e=>{const i=l.get(e);i&&(i.destroy(),l.delete(e),h.update(t=>{const n=new Map(t);return n.delete(e),n}),r.update(t=>{const n=new Map(t);return n.delete(e),n}))},getComponentVisibility:e=>{let i=!1;return r.subscribe(t=>{i=t.get(e)||!1})(),i},getAllComponentsVisibility:()=>{let e={};return r.subscribe(i=>{i.forEach((t,n)=>{e[n]=t})})(),e},showRegisteredComponents:()=>{l.forEach(e=>{e.show()})},hideRegisteredComponents:()=>{l.forEach(e=>{e.hide()})},callSection:()=>{w(f,r),l.forEach(e=>{e.hide()})},exitSection:()=>{S(f,r),l.forEach(e=>{e.show()})},getVisibleComponents:()=>{let e=[];return r.subscribe(i=>{e=[],i.forEach((t,n)=>{t&&e.push(n)})})(),e},isComponentVisible:e=>{let i=!1;return r.subscribe(t=>{i=t.get(e)||!1})(),i},monitorComponent:e=>{const i=r.subscribe(n=>n.get(e)||!1);let t=!1;return i(),{shouldBeVisible:t,isInVisibleList:t}},showOnlyComponent:e=>{const i=[...u,...Array.from(l.keys())];i.forEach(t=>{if(t===e){u.includes(t)&&g(t);const n=l.get(t);n&&n.show()}else{u.includes(t)&&C(t);const n=l.get(t);n&&n.hide()}}),r.update(t=>{const n=new Map(t);return i.forEach(o=>{n.set(o,o===e)}),n})},hideOnlyComponent:e=>{const i=[...u,...Array.from(l.keys())];i.forEach(t=>{if(t===e){u.includes(t)&&C(t);const n=l.get(t);n&&n.hide()}else{u.includes(t)&&g(t);const n=l.get(t);n&&n.show()}}),r.update(t=>{const n=new Map(t);return i.forEach(o=>{n.set(o,o!==e)}),n})},toggleComponent:e=>{let i=!1;if(r.subscribe(t=>{i=t.get(e)||!1})(),i){u.includes(e)&&C(e);const t=l.get(e);t&&t.hide(),r.update(n=>{const o=new Map(n);return o.set(e,!1),o})}else a.showOnlyComponent(e)},showOnlyComponents:e=>{const i=[...u,...Array.from(l.keys())];i.forEach(t=>{if(e.includes(t)){u.includes(t)&&g(t);const o=l.get(t);o&&o.show()}else{u.includes(t)&&C(t);const o=l.get(t);o&&o.hide()}}),r.update(t=>{const n=new Map(t);return i.forEach(o=>{n.set(o,e.includes(o))}),n})},hideOnlyComponents:e=>{const i=[...u,...Array.from(l.keys())];i.forEach(t=>{if(e.includes(t)){u.includes(t)&&C(t);const o=l.get(t);o&&o.hide()}else{u.includes(t)&&g(t);const o=l.get(t);o&&o.show()}}),r.update(t=>{const n=new Map(t);return i.forEach(o=>{n.set(o,!e.includes(o))}),n})},getComponentTrackingStore:()=>r,getRegisteredComponentTrackingStore:()=>h,isComponentCurrentlyVisible:e=>{let i=!1;return r.subscribe(t=>{i=t.get(e)||!1})(),i},getAllComponentsVisibilityStatus:()=>{let e={};return r.subscribe(i=>{i.forEach((t,n)=>{e[n]=t})})(),e},getComponentVisibilityStore:()=>r,subscribeToComponentVisibility:(e,i)=>{b(r,n=>n.get(e)||!1).subscribe(i)},subscribeToAllComponentsVisibility:e=>{r.subscribe(i=>{const t={};i.forEach((n,o)=>{t[o]=n}),e(t)})},getVisibilityStatistics:()=>{let e={totalComponents:0,visibleComponents:0,hiddenComponents:0,visibilityPercentage:0,visibleComponentIds:[],hiddenComponentIds:[]};return r.subscribe(i=>{e.totalComponents=i.size,e.visibleComponents=0,e.visibleComponentIds=[],e.hiddenComponentIds=[],i.forEach((t,n)=>{t?(e.visibleComponents++,e.visibleComponentIds.push(n)):e.hiddenComponentIds.push(n)}),e.hiddenComponents=e.totalComponents-e.visibleComponents,e.visibilityPercentage=e.totalComponents>0?e.visibleComponents/e.totalComponents*100:0})(),e},updateManualComponentsTracking:(e,i)=>{r.update(t=>{const n=new Map(t);return e.forEach(o=>{n.set(o,i)}),n})}}}const a=y();function k(e,i){return a.registeredComponents(e,i)}function O(e){a.unregisteredComponents(e)}function A(){a.callSection()}function x(){a.exitSection()}function V(){return[s.LanguageSwitch,s.ScrollIndicator]}function L(e){return V().includes(e)}function R(e){return a.monitorComponent(e)}function B(){return a.getAllComponentsVisibilityStatus()}function P(){return a.getComponentTrackingStore()}function N(){return a.getRegisteredComponentTrackingStore()}function D(e){return a.isComponentCurrentlyVisible(e)}function v(e){return b(a.getComponentTrackingStore(),i=>i.get(e)||!1)}function z(e,i){return v(e).subscribe(i)}function j(e){return a.getComponentTrackingStore().subscribe(e)}function q(){return a.getVisibilityStatistics()}function F(e,i){a.updateManualComponentsTracking(e,i)}function G(e){a.showOnlyComponent(e)}function J(e){a.hideOnlyComponent(e)}function K(e){a.toggleComponent(e)}function Q(e){a.showOnlyComponents(e)}function U(){return new Map(l)}export{y as createHeroMonitor,B as getAllComponentsVisibilityStatus,P as getComponentTrackingStore,v as getComponentVisibilityStore,V as getHeroVisibleComponents,N as getRegisteredComponentTrackingStore,U as getRegisteredHeroComponents,q as getVisibilityStatistics,a as heroMonitor,x as hideHeroComponents,J as hideOnlyHeroComponent,D as isComponentCurrentlyVisible,L as isComponentVisibleInHero,R as monitorHeroComponent,k as registerHeroComponent,A as showHeroComponents,G as showOnlyHeroComponent,Q as showOnlyHeroComponents,j as subscribeToAllComponentsVisibility,z as subscribeToComponentVisibility,K as toggleHeroComponent,O as unregisterHeroComponent,F as updateManualComponentsTracking};
